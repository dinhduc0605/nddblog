<% content_for :title, 'Home' %>
<% content_for :description, 'NDD Blog | A personal tech blog about web development, technology, and life in Japan' %>

<!-- Hero Section -->
<section class="modern-hero">
  <div class="hero-content">
    <span class="hero-badge">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
        <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
        <path d="M2 2l7.586 7.586"></path>
        <circle cx="11" cy="11" r="2"></circle>
      </svg>
      Tech Blog
    </span>
    <h1 class="hero-title">
      Hi, I'm <span class="highlight">Duc</span>.<br>
      Welcome to my blog.
    </h1>
    <p class="hero-subtitle">
      Sharing knowledge and experiences about web development, Ruby on Rails, and life as a developer in Japan.
    </p>
    <a href="#posts" class="hero-cta">
      Explore Posts
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="5" y1="12" x2="19" y2="12"></line>
        <polyline points="12 5 19 12 12 19"></polyline>
      </svg>
    </a>
  </div>
</section>

<!-- Posts Section -->
<section class="modern-posts-section" id="posts">
  <div class="posts-layout">
    <div class="posts-main">
      <header class="section-header">
        <h2 class="section-title">Latest Posts</h2>
      </header>

      <div class="posts-grid">
        <% @posts.each do |post| %>
          <%= render 'posts/post_card', post: post %>
        <% end %>
      </div>

      <% if @posts.total_pages > 1 %>
        <nav class="modern-pagination" aria-label="Pagination">
          <% if @posts.first_page? %>
            <span class="page-link disabled" aria-disabled="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
            </span>
          <% else %>
            <%= link_to url_for(page: @posts.prev_page), class: 'page-link', 'aria-label': 'Previous page' do %>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
            <% end %>
          <% end %>

          <% (1..@posts.total_pages).each do |page_num| %>
            <% if page_num == @posts.current_page %>
              <span class="page-link active" aria-current="page"><%= page_num %></span>
            <% elsif page_num == 1 || page_num == @posts.total_pages || (page_num >= @posts.current_page - 2 && page_num <= @posts.current_page + 2) %>
              <%= link_to page_num, url_for(page: page_num), class: 'page-link' %>
            <% elsif page_num == 2 || page_num == @posts.total_pages - 1 %>
              <span class="page-link disabled">...</span>
            <% end %>
          <% end %>

          <% if @posts.last_page? %>
            <span class="page-link disabled" aria-disabled="true">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </span>
          <% else %>
            <%= link_to url_for(page: @posts.next_page), class: 'page-link', 'aria-label': 'Next page' do %>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            <% end %>
          <% end %>
        </nav>
      <% end %>
    </div>

    <aside class="posts-sidebar">
      <%= render 'shared/sidebar', popular_posts: @popular_posts %>
    </aside>
  </div>
</section>

<% content_for :javascript do %>
  <%= javascript_include_tag 'sw_reg' %>
<% end %>
