<%= form_for(@user, url: admin_users_path, html: {multipart: true}) do |f| %>
  <%= render "shared/error_messages", object: f.object %>
  
  <div class="card">
    <div class="card-header">
      <h4 class="card-title">New User</h4>
    </div>
    <div class="card-body">
      <div class="row">
        <!-- Avatar Section -->
        <div class="col-md-4 text-center mb-4">
          <label class="form-label font-bold mb-2">Profile Picture</label>
          <div class="rounded-circle mx-auto shadow-md" id="image-preview" 
               style="background-image: url(<%= asset_path avatar_url(@user) %>); 
                      width: 200px; height: 200px; background-size: cover; background-position: center; 
                      position: relative; overflow: hidden; border: 4px solid white;">
            <%= f.file_field :avatar, style: "opacity: 0; width: 100%; height: 100%; cursor: pointer;" %>
            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.5); color: white; padding: 5px; font-size: 12px; pointer-events: none;">
              <i class="fa fa-camera"></i> Change
            </div>
          </div>
        </div>

        <!-- Form Fields -->
        <div class="col-md-8">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group mb-4">
                <%= f.label :email, class: "form-label font-bold" %>
                <%= f.email_field :email, autofocus: true, class: "form-control" %>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group mb-4">
                <%= f.label :name, class: "form-label font-bold" %>
                <%= f.text_field :name, class: "form-control" %>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group mb-4">
                <%= f.label :password, class: "form-label font-bold" %>
                <%= f.password_field :password, autocomplete: "off", class: "form-control" %>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group mb-4">
                <%= f.label :password_confirmation, class: "form-label font-bold" %>
                <%= f.password_field :password_confirmation, autocomplete: "off", class: "form-control" %>
              </div>
            </div>
          </div>

          <div class="form-group mb-4">
            <%= f.label :description, class: "form-label font-bold" %>
            <%= f.text_area :description, class: 'form-control', rows: 4 %>
          </div>

          <div class="form-actions text-right mt-4">
            <%= f.submit "Create User", class: "btn-primary" %>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>
